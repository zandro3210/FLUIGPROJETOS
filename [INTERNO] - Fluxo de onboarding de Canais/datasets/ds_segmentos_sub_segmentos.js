function createDataset(fields, constraints, sortFields) {		var newDataset = DatasetBuilder.newDataset(); 	newDataset.addColumn("codigoSegmento"); 	newDataset.addColumn("descricaoSegmento"); 	newDataset.addColumn("index"); 	newDataset.addColumn("codigoSubSegmento"); 	newDataset.addColumn("descricaoSubSegmento");		var segmento = null;	var subSegmento = null;	if (constraints != null) {		for(var c in constraints){			if (constraints[c].getFieldName() == "segmento"){				segmento = constraints[c].getInitialValue(); 			} else if (constraints[c].getFieldName() == "subSegmento"){				subSegmento = constraints[c].getInitialValue(); 			} 		}	}		var c1 = DatasetFactory.createConstraint("metadata#active", "true", "true", ConstraintType.MUST); 	var dsSegmento = DatasetFactory.getDataset("ds_segmentos ", null, new Array(c1), null); 		for( var i=0;i<dsSegmento.rowsCount; i++) { 		var c2 = DatasetFactory.createConstraint("tablename", "subSegmento" ,"subSegmento", ConstraintType.MUST); 		var c3 = DatasetFactory.createConstraint("metadata#id", dsSegmento.getValue(i, "metadata#id"), dsSegmento.getValue(i, "metadata#id"), ConstraintType.MUST); 		var c4 = DatasetFactory.createConstraint("metadata#version", dsSegmento.getValue(i, "metadata#version"), dsSegmento.getValue(i, "metadata#version"), ConstraintType.MUST); 		var dsSubSegmentos = DatasetFactory.getDataset("ds_segmentos ", null, new Array(c2, c3, c4), null); 				for(var x=0;x<dsSubSegmentos.rowsCount; x++) {			var l = true;			if (segmento != null && segmento != dsSegmento.getValue(i, "codigoSegmento")) { l = false; }			if (subSegmento != null && subSegmento != dsSubSegmentos.getValue(x, "codigoSubSegmento")) { l = false; }						if (l) {				newDataset.addRow(new Array(dsSegmento.getValue(i, "codigoSegmento"), 											dsSegmento.getValue(i, "descricaoSegmento"),											dsSubSegmentos.getValue(x, "wdk_sequence_id"), 											dsSubSegmentos.getValue(x, "codigoSubSegmento"), 											dsSubSegmentos.getValue(x, "descricaoSubSegmento"))); 			}		} 		}	return newDataset;}